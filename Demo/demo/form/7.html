<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<title>全选单选复选</title>
	<style type="text/css"></style>
</head>
<body>
	<div class="demo1">
		<h5><input type="checkbox" id="all"><label>全选选项</label></h5>
		<p><input type="checkbox" name="item"><label>选项（一）</label></p>
		<p><input type="checkbox" name="item"><label>选项（二）</label></p>
		<p><input type="checkbox" name="item"><label>选项（三）</label></p>
		<p><input type="checkbox" name="item"><label>选项（四）</label></p>
		<p><input type="checkbox" name="item"><label>选项（五）</label></p>
		<p><input type="checkbox" name="item"><label>选项（六）</label></p>
		<p><input type="checkbox" name="item"><label>选项（七）</label></p>
		<p><input type="checkbox" name="item"><label>选项（八）</label></p>
		<p><input type="checkbox" name="item"><label>选项（九）</label></p>
		<p><input type="checkbox" name="item"><label>选项（十）</label></p>
	</div>
	<script>
		(function () {
			var all = document.getElementById("all");
			var input = document.getElementsByTagName("input");
			var len = input.length - 1;
			all.onclick = function(){
				choose(this.checked);
			}
			function choose(t){
				each(input, function(i){
					input[i].checked = t;
				});
			}
			function each(arr, callback){
				var len = arr.length;
				for(var i = 1; i < len; i++){
					if(callback.call(arr[i], i, arr[i]) === false){//这句不是很懂 大概是遍历一次？
						break;
					}
				}
				return arr;
			}
			each(input, function(i){
				input[i].onclick = function(){
					if(!this.checked){
						all.checked = false;
					}
					if(checkLen() == len){
						all.checked = true;
					} else {
						all.checked = false;
					}
				}
			});
			function checkLen(){
				var n = 0;
				each(input, function(i){
					if(this.checked){
						n++;
					}
				});
				return n;
			}
		}());
	</script>
</body>
</html>